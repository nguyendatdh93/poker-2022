(self.webpackChunk=self.webpackChunk||[]).push([[685],{49967:(e,r,t)=>{"use strict";t.d(r,{Z:()=>p});var o=t(87757),n=t.n(o),a=t(15566),s=t(68843);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,r,t,o,n,a,s){try{var i=e[a](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(o,n)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(o,n){var a=e.apply(r,t);function s(e){c(a,o,n,s,i,"next",e)}function i(e){c(a,o,n,s,i,"throw",e)}s(void 0)}))}}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===i(e)&&(t=e,e=""),t=f({url:e,title:r,width:600,height:720},t);var o=void 0!==window.screenLeft?window.screenLeft:window.screen.left,n=void 0!==window.screenTop?window.screenTop:window.screen.top,a=window.innerWidth||document.documentElement.clientWidth||window.screen.width,s=window.innerHeight||document.documentElement.clientHeight||window.screen.height;t.left=a/2-t.width/2+o,t.top=s/2-t.height/2+n;var c=Object.keys(t).reduce((function(e,r){return e.push("".concat(r,"=").concat(t[r])),e}),[]).join(","),u=window.open(e,r,c);return window.focus&&u.focus(),u}const p={name:"OAuth",computed:f(f({},(0,t(20629).rn)("auth",["user"])),{},{providers:function(){return(0,a.v)("oauth")},providersCount:function(){return this.providers?Object.keys(this.providers).length:0}}),mounted:function(){window.addEventListener("message",this.onMessage,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},methods:{ucfirst:s.Ps,loginWith:function(e){var r=this;return u(n().mark((function t(){var o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=m("",r.$t("Log in with {0}",[e])),t.next=3,r.$store.dispatch("auth/fetchOAuthRedirectUrl",{provider:e});case 3:o.location.href=t.sent;case 4:case"end":return t.stop()}}),t)})))()},onMessage:function(e){var r=this;return u(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.origin===window.origin&&e.data.user){t.next=2;break}return t.abrupt("return");case 2:r.$store.dispatch("auth/updateUser",e.data.user),r.user.two_factor_auth_enabled&&!r.user.two_factor_auth_passed?r.$router.push({name:"2fa"}):r.$router.push({name:"home"});case 4:case"end":return t.stop()}}),t)})))()}}}},91441:(e,r,t)=>{"use strict";t.d(r,{s:()=>o,x:()=>n});var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.providersCount?t("v-row",[t("v-col",{staticClass:"text-center"},[e._l(e.providers,(function(r,o){return t("v-btn",{key:o,staticClass:"mx-2",attrs:{fab:"",icon:"",elevation:"5"},on:{click:function(r){return e.loginWith(o)}}},[t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var a=n.on;return[t("v-icon",e._g({attrs:{large:""}},a),[e._v("\n            mdi-"+e._s(r.mdi||o)+"\n          ")])]}}],null,!0)},[e._v(" "),t("span",[e._v(e._s(e.$t("Log in with {0}",[e.ucfirst(o)])))])])],1)})),e._v(" "),t("v-divider",{staticClass:"my-7"})],2)],1):e._e()},n=[]},20727:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>E});var o=t(87757),n=t.n(o),a=t(15566),s=t(50175),i=t.n(s),c=t(93503),u=t(10521),l=t(97991);function f(e,r,t,o,n,a,s){try{var i=e[a](s),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(o,n)}const d={middleware:"guest",components:{OAuth:u.Z,VueRecaptcha:l.Z},mixins:[c.Z],metaInfo:function(){return{title:this.$t("Registration")}},data:function(){var e;return{agreementAccepted:!1,showPassword:!1,showPassword2:!1,form:new(i())({name:null,email:null,password:null,password_confirmation:null,referral_code:null!==(e=this.hasCookie)&&void 0!==e?e:null,recaptcha:null})}},computed:{appLogoUrl:function(){return(0,a.v)("app.logo")},emailVerification:function(){return(0,a.v)("settings.email_verification")},recaptchaPublicKey:function(){return(0,a.v)("services.recaptcha.public_key")},hasCookie:function(){return(0,a.v)("referral_code")}},created:function(){this.form.referral_code=this.hasCookie},methods:{register:function(){var e,r=this;return(e=n().mark((function e(){var t,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r.hasCookie,"refffffff"),e.next=3,r.form.post("/api/auth/register").catch((function(){return r.recaptchaPublicKey&&(r.form.recaptcha=null,r.$refs.recaptcha.reset()),{}}));case 3:t=e.sent,(o=t.data)&&(r.$store.dispatch("auth/updateUser",o),r.$store.dispatch("message/success",{text:r.emailVerification?["We have sent a verification link to your email.","Please click on that link to verify your email and continue using our website."].map((function(e){return r.$t(e)})).join(" "):r.$t("You have successfully registered!")}),r.$router.push({name:"home"}));case 6:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(o,n){var a=e.apply(r,t);function s(e){f(a,o,n,s,i,"next",e)}function i(e){f(a,o,n,s,i,"throw",e)}s(void 0)}))})()}}};var m=t(51900),p=t(43453),v=t.n(p),h=t(97844),w=t(4330),y=t(43776),g=t(5255),b=t(59933),_=t(17024),k=t(66530),x=t(83240),P=t(17100),$=t(57894),C=t(22515),O=t(54933),V=t(40961),j=t(73845),Z=(0,m.Z)(d,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[t("v-row",{attrs:{align:"center",justify:"center"}},[t("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[t("v-card",{staticClass:"elevation-12"},[t("v-toolbar",{attrs:{color:"primary"}},[t("router-link",{attrs:{to:{name:"home"}}},[t("v-avatar",{attrs:{size:"40",tile:""}},[t("v-img",{attrs:{src:e.appLogoUrl}})],1)],1),e._v(" "),t("v-toolbar-title",{staticClass:"ml-2"},[e._v("\n            "+e._s(e.$t("Registration"))+"\n          ")]),e._v(" "),t("v-spacer")],1),e._v(" "),t("v-card-text",[t("o-auth"),e._v(" "),t("v-form",{ref:"form",on:{submit:function(r){return r.preventDefault(),e.register(r)}},model:{value:e.formIsValid,callback:function(r){e.formIsValid=r},expression:"formIsValid"}},[t("v-text-field",{attrs:{label:e.$t("Name"),type:"text",name:"name",rules:[e.validationRequired],error:e.form.errors.has("name"),"error-messages":e.form.errors.get("name"),outlined:""},on:{keydown:function(r){return e.clearFormErrors(r,"name")}},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}}),e._v(" "),t("v-text-field",{attrs:{label:e.$t("Email"),type:"email",name:"email",rules:[e.validationRequired,e.validationEmail],error:e.form.errors.has("email"),"error-messages":e.form.errors.get("email"),outlined:""},on:{keydown:function(r){return e.clearFormErrors(r,"email")}},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}}),e._v(" "),t("v-text-field",{attrs:{label:"Referral Code",type:"text",name:"referral_code",rules:[e.validationRequired],error:e.form.errors.has("referral_code"),"error-messages":e.form.errors.get("referral_code"),outlined:""},on:{keydown:function(r){return e.clearFormErrors(r,"referral_code")}},model:{value:e.form.referral_code,callback:function(r){e.$set(e.form,"referral_code",r)},expression:"form.referral_code"}}),e._v(" "),t("v-text-field",{attrs:{label:e.$t("Password"),"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",name:"password",rules:[e.validationRequired,function(r){return e.validationMinLength(r,6)}],error:e.form.errors.has("password"),"error-messages":e.form.errors.get("password"),outlined:"",counter:!0},on:{"click:append":function(r){e.showPassword=!e.showPassword},keydown:function(r){return e.clearFormErrors(r,"password")}},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}}),e._v(" "),t("v-text-field",{attrs:{label:e.$t("Confirm password"),"append-icon":e.showPassword2?"mdi-eye":"mdi-eye-off",type:e.showPassword2?"text":"password",name:"password_confirmation",rules:[e.validationRequired,function(r){return e.validationMatch(e.form.password,r)}],error:e.form.errors.has("password_confirmation"),"error-messages":e.form.errors.get("password_confirmation"),outlined:"",counter:!0},on:{"click:append":function(r){e.showPassword2=!e.showPassword2},keydown:function(r){return e.clearFormErrors(r,"password_confirmation")}},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}}),e._v(" "),t("v-checkbox",{attrs:{color:"primary"},scopedSlots:e._u([{key:"label",fn:function(){return[t("i18n",{attrs:{path:"I accept {0} and {1}",tag:"div"},scopedSlots:e._u([{key:"0",fn:function(){return[t("a",{attrs:{href:"/pages/terms-of-use",target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n                      "+e._s(e.$t("Terms of use"))+"\n                    ")])]},proxy:!0},{key:"1",fn:function(){return[t("a",{attrs:{href:"/pages/privacy-policy",target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n                      "+e._s(e.$t("Privacy policy"))+"\n                    ")])]},proxy:!0}])})]},proxy:!0}]),model:{value:e.agreementAccepted,callback:function(r){e.agreementAccepted=r},expression:"agreementAccepted"}}),e._v(" "),e.recaptchaPublicKey?t("vue-recaptcha",{ref:"recaptcha",staticClass:"mb-3",attrs:{sitekey:e.recaptchaPublicKey,loadRecaptchaScript:!0,theme:this.$vuetify.theme.isDark?"dark":"light"},on:{verify:function(r){return e.form.recaptcha=r}}}):e._e(),e._v(" "),t("v-row",{attrs:{align:"center"}},[t("v-col",{staticClass:"text-center text-md-left"},[t("v-btn",{attrs:{type:"submit",color:"primary",disabled:!e.formIsValid||e.form.busy||!e.agreementAccepted||!!e.recaptchaPublicKey&&!e.form.recaptcha,loading:e.form.busy}},[e._v("\n                  "+e._s(e.$t("Register"))+"\n                ")])],1),e._v(" "),t("v-col",{staticClass:"text-center text-md-right"},[t("router-link",{attrs:{to:{name:"login"}}},[e._v("\n                  "+e._s(e.$t("Already signed up?"))+"\n                ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);const E=Z.exports;v()(Z,{VAvatar:h.Z,VBtn:w.Z,VCard:y.Z,VCardText:g.ZB,VCheckbox:b.Z,VCol:_.Z,VContainer:k.Z,VForm:x.Z,VImg:P.Z,VRow:$.Z,VSpacer:C.Z,VTextField:O.Z,VToolbar:V.Z,VToolbarTitle:j.qW})}}]);
//# sourceMappingURL=register.js.map