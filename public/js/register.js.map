{"version":3,"sources":["webpack:///resources/js/components/OAuth.vue","webpack:///./resources/js/components/OAuth.vue?aae6","webpack:///./resources/js/components/OAuth.vue?abdb","webpack:///./resources/js/pages/register.vue?fb2e","webpack:///resources/js/pages/register.vue","webpack:///./resources/js/pages/register.vue?9bb9","webpack:///./resources/js/pages/register.vue"],"names":["openWindow","options","url","left","top","acc","push","window","focus","newWindow","name","computed","providers","config","providersCount","this","Object","keys","length","mounted","addEventListener","onMessage","beforeDestroy","removeEventListener","methods","ucfirst","render","_vm","_h","$createElement","_c","_self","staticClass","_l","provider","id","key","attrs","on","$event","loginWith","scopedSlots","_u","fn","ref","_g","_v","_s","mdi","$t","_e","staticRenderFns","middleware","components","mixins","Form","metaInfo","data","agreementAccepted","showPassword","showPassword2","form","email","password","password_confirmation","recaptcha","appLogoUrl","emailVerification","recaptchaPublicKey","component","preventDefault","register","model","value","callback","$$v","formIsValid","expression","validationRequired","errors","has","get","clearFormErrors","$set","validationEmail","v","validationMinLength","validationMatch","stopPropagation","proxy","$vuetify","theme","isDark","token","busy","VAvatar"],"mappings":"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","file":"js/register.js","sourcesContent":["<template>\n  <v-row v-if=\"providersCount\">\n    <v-col class=\"text-center\">\n      <v-btn v-for=\"(provider, id) in providers\" :key=\"id\" class=\"mx-2\" @click=\"loginWith(id)\" fab icon elevation=\"5\">\n        <v-tooltip bottom>\n          <template v-slot:activator=\"{ on }\">\n            <v-icon v-on=\"on\" large>\n              mdi-{{ provider.mdi || id }}\n            </v-icon>\n          </template>\n          <span>{{ $t('Log in with {0}', [ucfirst(id)]) }}</span>\n        </v-tooltip>\n      </v-btn>\n      <v-divider class=\"my-7\" />\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { config } from '~/plugins/config'\nimport { ucfirst } from '~/plugins/utils'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'OAuth',\n\n  computed: {\n    ...mapState('auth', [\n      'user'\n    ]),\n    providers () {\n      return config('oauth')\n    },\n    providersCount () {\n      return this.providers ? Object.keys(this.providers).length : 0\n    }\n  },\n\n  mounted () {\n    window.addEventListener('message', this.onMessage, false)\n  },\n\n  beforeDestroy () {\n    window.removeEventListener('message', this.onMessage)\n  },\n\n  methods: {\n    ucfirst,\n    async loginWith (provider) {\n      const newWindow = openWindow('', this.$t('Log in with {0}', [provider]))\n\n      newWindow.location.href = await this.$store.dispatch('auth/fetchOAuthRedirectUrl', { provider })\n    },\n\n    /**\n     * @param {MessageEvent} e\n     */\n    async onMessage (e) {\n      if (e.origin !== window.origin || !e.data.user) {\n        return\n      }\n\n      // Update the user\n      this.$store.dispatch('auth/updateUser', e.data.user)\n\n      if (this.user.two_factor_auth_enabled && !this.user.two_factor_auth_passed) {\n        this.$router.push({ name: '2fa' })\n      } else {\n        this.$router.push({ name: 'home' })\n      }\n    }\n  }\n}\n\n/**\n * @param  {Object} options\n * @return {Window}\n */\nfunction openWindow (url, title, options = {}) {\n  if (typeof url === 'object') {\n    options = url\n    url = ''\n  }\n\n  options = { url, title, width: 600, height: 720, ...options }\n\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screen.left\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screen.top\n  const width = window.innerWidth || document.documentElement.clientWidth || window.screen.width\n  const height = window.innerHeight || document.documentElement.clientHeight || window.screen.height\n\n  options.left = ((width / 2) - (options.width / 2)) + dualScreenLeft\n  options.top = ((height / 2) - (options.height / 2)) + dualScreenTop\n\n  const optionsStr = Object.keys(options).reduce((acc, key) => {\n    acc.push(`${key}=${options[key]}`)\n    return acc\n  }, []).join(',')\n\n  const newWindow = window.open(url, title, optionsStr)\n\n  if (window.focus) {\n    newWindow.focus()\n  }\n\n  return newWindow\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OAuth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OAuth.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.providersCount)?_c('v-row',[_c('v-col',{staticClass:\"text-center\"},[_vm._l((_vm.providers),function(provider,id){return _c('v-btn',{key:id,staticClass:\"mx-2\",attrs:{\"fab\":\"\",\"icon\":\"\",\"elevation\":\"5\"},on:{\"click\":function($event){return _vm.loginWith(id)}}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-icon',_vm._g({attrs:{\"large\":\"\"}},on),[_vm._v(\"\\n            mdi-\"+_vm._s(provider.mdi || id)+\"\\n          \")])]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.$t('Log in with {0}', [_vm.ucfirst(id)])))])])],1)}),_vm._v(\" \"),_c('v-divider',{staticClass:\"my-7\"})],2)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"8\",\"md\":\"6\",\"lg\":\"4\"}},[_c('v-card',{staticClass:\"elevation-12\"},[_c('v-toolbar',{attrs:{\"color\":\"primary\"}},[_c('router-link',{attrs:{\"to\":{ name: 'home' }}},[_c('v-avatar',{attrs:{\"size\":\"40\",\"tile\":\"\"}},[_c('v-img',{attrs:{\"src\":_vm.appLogoUrl}})],1)],1),_vm._v(\" \"),_c('v-toolbar-title',{staticClass:\"ml-2\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('Registration'))+\"\\n          \")]),_vm._v(\" \"),_c('v-spacer')],1),_vm._v(\" \"),_c('v-card-text',[_c('o-auth'),_vm._v(\" \"),_c('v-form',{ref:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.register($event)}},model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('Name'),\"type\":\"text\",\"name\":\"name\",\"rules\":[_vm.validationRequired],\"error\":_vm.form.errors.has('name'),\"error-messages\":_vm.form.errors.get('name'),\"outlined\":\"\"},on:{\"keydown\":function($event){return _vm.clearFormErrors($event,'name')}},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":_vm.$t('Email'),\"type\":\"email\",\"name\":\"email\",\"rules\":[_vm.validationRequired, _vm.validationEmail],\"error\":_vm.form.errors.has('email'),\"error-messages\":_vm.form.errors.get('email'),\"outlined\":\"\"},on:{\"keydown\":function($event){return _vm.clearFormErrors($event,'email')}},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":_vm.$t('Password'),\"append-icon\":_vm.showPassword ? 'mdi-eye' : 'mdi-eye-off',\"type\":_vm.showPassword ? 'text' : 'password',\"name\":\"password\",\"rules\":[_vm.validationRequired, function (v) { return _vm.validationMinLength(v,6); }],\"error\":_vm.form.errors.has('password'),\"error-messages\":_vm.form.errors.get('password'),\"outlined\":\"\",\"counter\":true},on:{\"click:append\":function($event){_vm.showPassword = !_vm.showPassword},\"keydown\":function($event){return _vm.clearFormErrors($event,'password')}},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":_vm.$t('Confirm password'),\"append-icon\":_vm.showPassword2 ? 'mdi-eye' : 'mdi-eye-off',\"type\":_vm.showPassword2 ? 'text' : 'password',\"name\":\"password_confirmation\",\"rules\":[_vm.validationRequired, function (v) { return _vm.validationMatch(_vm.form.password,v); }],\"error\":_vm.form.errors.has('password_confirmation'),\"error-messages\":_vm.form.errors.get('password_confirmation'),\"outlined\":\"\",\"counter\":true},on:{\"click:append\":function($event){_vm.showPassword2 = !_vm.showPassword2},\"keydown\":function($event){return _vm.clearFormErrors($event,'password_confirmation')}},model:{value:(_vm.form.password_confirmation),callback:function ($$v) {_vm.$set(_vm.form, \"password_confirmation\", $$v)},expression:\"form.password_confirmation\"}}),_vm._v(\" \"),_c('v-checkbox',{attrs:{\"color\":\"primary\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('i18n',{attrs:{\"path\":\"I accept {0} and {1}\",\"tag\":\"div\"},scopedSlots:_vm._u([{key:\"0\",fn:function(){return [_c('a',{attrs:{\"href\":\"/pages/terms-of-use\",\"target\":\"_blank\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"\\n                      \"+_vm._s(_vm.$t('Terms of use'))+\"\\n                    \")])]},proxy:true},{key:\"1\",fn:function(){return [_c('a',{attrs:{\"href\":\"/pages/privacy-policy\",\"target\":\"_blank\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"\\n                      \"+_vm._s(_vm.$t('Privacy policy'))+\"\\n                    \")])]},proxy:true}])})]},proxy:true}]),model:{value:(_vm.agreementAccepted),callback:function ($$v) {_vm.agreementAccepted=$$v},expression:\"agreementAccepted\"}}),_vm._v(\" \"),(_vm.recaptchaPublicKey)?_c('vue-recaptcha',{ref:\"recaptcha\",staticClass:\"mb-3\",attrs:{\"sitekey\":_vm.recaptchaPublicKey,\"loadRecaptchaScript\":true,\"theme\":this.$vuetify.theme.isDark ? 'dark' : 'light'},on:{\"verify\":function (token) { return _vm.form.recaptcha = token; }}}):_vm._e(),_vm._v(\" \"),_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{staticClass:\"text-center text-md-left\"},[_c('v-btn',{attrs:{\"type\":\"submit\",\"color\":\"primary\",\"disabled\":!_vm.formIsValid || _vm.form.busy || !_vm.agreementAccepted || (!!_vm.recaptchaPublicKey && !_vm.form.recaptcha),\"loading\":_vm.form.busy}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Register'))+\"\\n                \")])],1),_vm._v(\" \"),_c('v-col',{staticClass:\"text-center text-md-right\"},[_c('router-link',{attrs:{\"to\":{ name: 'login' }}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('Already signed up?'))+\"\\n                \")])],1)],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"fill-height\" fluid>\n    <v-row align=\"center\" justify=\"center\">\n      <v-col cols=\"12\" sm=\"8\" md=\"6\" lg=\"4\">\n        <v-card class=\"elevation-12\">\n          <v-toolbar color=\"primary\">\n            <router-link :to=\"{ name: 'home' }\">\n              <v-avatar size=\"40\" tile>\n                <v-img :src=\"appLogoUrl\" />\n              </v-avatar>\n            </router-link>\n            <v-toolbar-title class=\"ml-2\">\n              {{ $t('Registration') }}\n            </v-toolbar-title>\n            <v-spacer />\n          </v-toolbar>\n          <v-card-text>\n            <o-auth />\n            <v-form ref=\"form\" v-model=\"formIsValid\" @submit.prevent=\"register\">\n              <v-text-field\n                v-model=\"form.name\"\n                :label=\"$t('Name')\"\n                type=\"text\"\n                name=\"name\"\n                :rules=\"[validationRequired]\"\n                :error=\"form.errors.has('name')\"\n                :error-messages=\"form.errors.get('name')\"\n                outlined\n                @keydown=\"clearFormErrors($event,'name')\"\n              />\n\n              <v-text-field\n                v-model=\"form.email\"\n                :label=\"$t('Email')\"\n                type=\"email\"\n                name=\"email\"\n                :rules=\"[validationRequired, validationEmail]\"\n                :error=\"form.errors.has('email')\"\n                :error-messages=\"form.errors.get('email')\"\n                outlined\n                @keydown=\"clearFormErrors($event,'email')\"\n              />\n\n              <v-text-field\n                v-model=\"form.password\"\n                :label=\"$t('Password')\"\n                :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n                :type=\"showPassword ? 'text' : 'password'\"\n                name=\"password\"\n                :rules=\"[validationRequired, v => validationMinLength(v,6)]\"\n                :error=\"form.errors.has('password')\"\n                :error-messages=\"form.errors.get('password')\"\n                outlined\n                :counter=\"true\"\n                @click:append=\"showPassword = !showPassword\"\n                @keydown=\"clearFormErrors($event,'password')\"\n              />\n\n              <v-text-field\n                v-model=\"form.password_confirmation\"\n                :label=\"$t('Confirm password')\"\n                :append-icon=\"showPassword2 ? 'mdi-eye' : 'mdi-eye-off'\"\n                :type=\"showPassword2 ? 'text' : 'password'\"\n                name=\"password_confirmation\"\n                :rules=\"[validationRequired, v => validationMatch(form.password,v)]\"\n                :error=\"form.errors.has('password_confirmation')\"\n                :error-messages=\"form.errors.get('password_confirmation')\"\n                outlined\n                :counter=\"true\"\n                @click:append=\"showPassword2 = !showPassword2\"\n                @keydown=\"clearFormErrors($event,'password_confirmation')\"\n              />\n\n              <v-checkbox\n                v-model=\"agreementAccepted\"\n                color=\"primary\"\n              >\n                <template v-slot:label>\n                  <i18n path=\"I accept {0} and {1}\" tag=\"div\">\n                    <template v-slot:0>\n                      <a href=\"/pages/terms-of-use\" target=\"_blank\" @click.stop>\n                        {{ $t('Terms of use') }}\n                      </a>\n                    </template>\n                    <template v-slot:1>\n                      <a href=\"/pages/privacy-policy\" target=\"_blank\" @click.stop>\n                        {{ $t('Privacy policy') }}\n                      </a>\n                    </template>\n                  </i18n>\n                </template>\n              </v-checkbox>\n\n              <vue-recaptcha\n                v-if=\"recaptchaPublicKey\"\n                ref=\"recaptcha\"\n                :sitekey=\"recaptchaPublicKey\"\n                :loadRecaptchaScript=\"true\"\n                :theme=\"this.$vuetify.theme.isDark ? 'dark' : 'light'\"\n                class=\"mb-3\"\n                @verify=\"token => form.recaptcha = token\"\n              />\n\n              <v-row align=\"center\">\n                <v-col class=\"text-center text-md-left\">\n                  <v-btn type=\"submit\" color=\"primary\" :disabled=\"!formIsValid || form.busy || !agreementAccepted || (!!recaptchaPublicKey && !form.recaptcha)\" :loading=\"form.busy\">\n                    {{ $t('Register') }}\n                  </v-btn>\n                </v-col>\n                <v-col class=\"text-center text-md-right\">\n                  <router-link :to=\"{ name: 'login' }\">\n                    {{ $t('Already signed up?') }}\n                  </router-link>\n                </v-col>\n              </v-row>\n            </v-form>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { config } from '~/plugins/config'\nimport Form from 'vform'\nimport FormMixin from '~/mixins/Form'\nimport OAuth from '~/components/OAuth'\nimport VueRecaptcha from 'vue-recaptcha'\n\nexport default {\n  middleware: 'guest',\n\n  components: { OAuth, VueRecaptcha },\n\n  mixins: [FormMixin],\n\n  metaInfo () {\n    return { title: this.$t('Registration') }\n  },\n\n  data () {\n    return {\n      agreementAccepted: false,\n      showPassword: false,\n      showPassword2: false,\n      form: new Form({\n        name: null,\n        email: null,\n        password: null,\n        password_confirmation: null,\n        recaptcha: null\n      })\n    }\n  },\n\n  computed: {\n    appLogoUrl () {\n      return config('app.logo')\n    },\n    emailVerification () {\n      return config('settings.email_verification')\n    },\n    recaptchaPublicKey () {\n      return config('services.recaptcha.public_key')\n    }\n  },\n\n  methods: {\n    async register () {\n      // Register the user\n      const { data } = await this.form.post('/api/auth/register')\n        .catch(() => {\n          if (this.recaptchaPublicKey) {\n            this.form.recaptcha = null\n            this.$refs.recaptcha.reset()\n          }\n          return {}\n        })\n\n      // in case of any error data will be undefined\n      if (data) {\n        // Store the user\n        this.$store.dispatch('auth/updateUser', data)\n\n        this.$store.dispatch('message/success', {\n          text: this.emailVerification\n            ? [\n              'We have sent a verification link to your email.',\n              'Please click on that link to verify your email and continue using our website.'\n            ].map(m => this.$t(m)).join(' ')\n            : this.$t('You have successfully registered!')\n        })\n\n        // Redirect home\n        this.$router.push({ name: 'home' })\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./register.vue?vue&type=template&id=5aa79614&\"\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAvatar,VBtn,VCard,VCardText,VCheckbox,VCol,VContainer,VForm,VImg,VRow,VSpacer,VTextField,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}